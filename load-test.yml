config:
  target: "http://localhost:3000"
  phases:
    - duration: 60
      arrivalRate: 3
      name: "Sustained load of 3 orders per second"
  # Load the custom JavaScript file
  processor: "./helpers.js"
scenarios:
  - name: "Place a COD Order"
    flow:
      - post:
          url: "/orders"
          headers:
            Authorization: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJjbWVpcjM3MzUwMDBtYmc0d3Jxand6dG5yIiwiZW1haWwiOiJhYmhpbmF2YWxsYW1wYWxseUBjaHJpc3R1bml2ZXJzaXR5LmluIiwiaWF0IjoxNzU1NjIxNzcyLCJleHAiOjE3NTU2MjUzNzJ9.9OdNx3CpK2KRtXd86QZ1SxsY-tY_6o6AVJR5TQ6Lxds"
          json:
            outletId: "cmeiqxakw0008bg4whxw167uq"
            paymentMode: "COD"
            # This calls a function from helpers.js to get a unique future time slot
            slotTime: "{{ getFutureSlotTime() }}"
            items:
              - menuItemId: "cmeiqyjug000bbg4we1oo8lw2"
                quantity: 1